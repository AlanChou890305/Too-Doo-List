# Too-Doo-List ç’°å¢ƒæ¶æ§‹ç¸½è¦½

## ğŸ—ï¸ æ¶æ§‹æ¦‚è¦½

Too-Doo-List æ¡ç”¨**ç°¡åŒ–é›™ç’°å¢ƒæ¶æ§‹**ï¼Œå……åˆ†åˆ©ç”¨ Supabase Free Plan çš„ 2 å€‹ project é™åˆ¶ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Too-Doo-List å°ˆæ¡ˆ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Staging ç’°å¢ƒ      â”‚         â”‚  Production ç’°å¢ƒ    â”‚     â”‚
â”‚  â”‚  (é–‹ç™¼ + æ¸¬è©¦)      â”‚         â”‚    (æ­£å¼ç’°å¢ƒ)       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â”‚                              â”‚                   â”‚
â”‚           â–¼                              â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  GitHub: develop   â”‚         â”‚   GitHub: main     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â”‚                              â”‚                   â”‚
â”‚           â–¼                              â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Vercel: To Do      â”‚         â”‚  Vercel: To Do     â”‚     â”‚
â”‚  â”‚      Staging       â”‚         â”‚    Production      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â”‚                              â”‚                   â”‚
â”‚           â–¼                              â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Supabase:         â”‚         â”‚   Supabase:        â”‚     â”‚
â”‚  â”‚  to-do-staging     â”‚         â”‚ to-do-production   â”‚     â”‚
â”‚  â”‚  (qerosiozlt...)   â”‚         â”‚  (ajbusqpjsj...)   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š ç’°å¢ƒè©³ç´°è³‡è¨Š

### ğŸ”§ Staging ç’°å¢ƒï¼ˆé–‹ç™¼ + æ¸¬è©¦ï¼‰

**ç”¨é€”:**
- åŠŸèƒ½é–‹ç™¼
- æ•´åˆæ¸¬è©¦
- UI/UX æ¸¬è©¦
- Bug ä¿®å¾©é©—è­‰

**é…ç½®:**

| é …ç›® | è©³ç´°è³‡è¨Š |
|-----|---------|
| **Git Branch** | `develop` |
| **Vercel Project** | To Do Staging |
| **Vercel Domain** | `to-do-staging.vercel.app` |
| **Supabase Project** | to-do-staging |
| **Supabase ID** | qerosiozltqrbehctxdn |
| **Supabase Region** | ap-southeast-1 (Singapore) |
| **Supabase URL** | `https://qerosiozltqrbehctxdn.supabase.co` |
| **ç’°å¢ƒè®Šæ•¸å‰ç¶´** | `_DEV` æˆ– `_STAGING` |

**ç’°å¢ƒè®Šæ•¸:**
```bash
EXPO_PUBLIC_APP_ENV=development
EXPO_PUBLIC_SUPABASE_URL_DEV=https://qerosiozltqrbehctxdn.supabase.co
EXPO_PUBLIC_SUPABASE_ANON_KEY_DEV=your-staging-anon-key
EXPO_PUBLIC_ENABLE_DEBUG=true
EXPO_PUBLIC_ENABLE_ANALYTICS=false
```

**ç‰¹æ€§:**
- âœ… Debug æ¨¡å¼å•Ÿç”¨
- âœ… è©³ç´°çš„ Console è¼¸å‡º
- âœ… å¯ä»¥è‡ªç”±æ¸¬è©¦å’Œä¿®æ”¹è³‡æ–™
- âœ… ä¸å½±éŸ¿æ­£å¼ç’°å¢ƒ
- âŒ Analytics é—œé–‰

---

### ğŸš€ Production ç’°å¢ƒï¼ˆæ­£å¼ï¼‰

**ç”¨é€”:**
- æ­£å¼ä¸Šç·š
- çœŸå¯¦ç”¨æˆ¶æœå‹™
- ç”Ÿç”¢ç’°å¢ƒ

**é…ç½®:**

| é …ç›® | è©³ç´°è³‡è¨Š |
|-----|---------|
| **Git Branch** | `main` |
| **Vercel Project** | To Do Production |
| **Vercel Domain** | `to-do-dev-alan.vercel.app` |
| **Supabase Project** | to-do-production (åŸ to-do-dev) |
| **Supabase ID** | ajbusqpjsjcuzzxuueij |
| **Supabase Region** | ap-south-1 (Mumbai) |
| **Supabase URL** | `https://ajbusqpjsjcuzzxuueij.supabase.co` |
| **ç’°å¢ƒè®Šæ•¸å‰ç¶´** | (ç„¡) æˆ– `_PROD` |

**ç’°å¢ƒè®Šæ•¸:**
```bash
EXPO_PUBLIC_APP_ENV=production
EXPO_PUBLIC_SUPABASE_URL=https://ajbusqpjsjcuzzxuueij.supabase.co
EXPO_PUBLIC_SUPABASE_ANON_KEY=your-production-anon-key
EXPO_PUBLIC_ENABLE_DEBUG=false
EXPO_PUBLIC_ENABLE_ANALYTICS=true
```

**ç‰¹æ€§:**
- âŒ Debug æ¨¡å¼é—œé–‰
- âŒ Console è¼¸å‡ºæœ€å°åŒ–
- âœ… åš´æ ¼çš„è³‡æ–™ä¿è­·
- âœ… å®Œæ•´çš„ RLS ç­–ç•¥
- âœ… Analytics å•Ÿç”¨

---

## ğŸ”„ å·¥ä½œæµç¨‹

### é–‹ç™¼æµç¨‹

```mermaid
graph LR
    A[æœ¬åœ°é–‹ç™¼] --> B[develop branch]
    B --> C[Push to GitHub]
    C --> D[Vercel Auto Deploy]
    D --> E[Staging Environment]
    E --> F{æ¸¬è©¦é€šé?}
    F -->|Yes| G[Merge to main]
    F -->|No| A
    G --> H[Production Deploy]
```

### è©³ç´°æ­¥é©Ÿ

**1. æœ¬åœ°é–‹ç™¼ (Staging)**
```bash
# åˆ‡æ›åˆ° develop åˆ†æ”¯
git checkout develop

# é–‹ç™¼æ–°åŠŸèƒ½
# ... coding ...

# æœ¬åœ°æ¸¬è©¦ï¼ˆé€£æ¥ Staging Supabaseï¼‰
npm start

# Commit è®Šæ›´
git add .
git commit -m "[feat] æ–°åŠŸèƒ½æè¿° (v1.x.x)"
```

**2. æ¨é€åˆ° Staging**
```bash
# æ¨é€åˆ° develop åˆ†æ”¯
git push origin develop

# Vercel è‡ªå‹•éƒ¨ç½²åˆ° Staging
# è¨ªå•: https://too-doo-list-staging.vercel.app
# é€²è¡Œå®Œæ•´æ¸¬è©¦
```

**3. ç™¼å¸ƒåˆ° Production**
```bash
# æ¸¬è©¦é€šéå¾Œï¼Œåˆä½µåˆ° main
git checkout main
git merge develop

# æ›´æ–°ç‰ˆæœ¬è™Ÿï¼ˆå¦‚éœ€è¦ï¼‰
# ç·¨è¼¯ app.config.js å’Œ package.json

# æ¨é€åˆ° main
git push origin main

# Vercel è‡ªå‹•éƒ¨ç½²åˆ° Production
# è¨ªå•: https://to-do-dev-alan.vercel.app
```

---

## ğŸ” å®‰å…¨æ€§èˆ‡éš”é›¢

### è³‡æ–™éš”é›¢

| é …ç›® | Staging | Production |
|-----|---------|-----------|
| **è³‡æ–™åº«** | æ¸¬è©¦è³‡æ–™ | çœŸå¯¦ç”¨æˆ¶è³‡æ–™ |
| **å¯ä¿®æ”¹æ€§** | âœ… å¯è‡ªç”±ä¿®æ”¹ | âŒ åš´æ ¼ä¿è­· |
| **å‚™ä»½é »ç‡** | æ¯é€± | æ¯æ—¥ |
| **RLS ç­–ç•¥** | è¼ƒå¯¬é¬† | åš´æ ¼åŸ·è¡Œ |

### ç’°å¢ƒè®Šæ•¸éš”é›¢

- âœ… å®Œå…¨ä¸åŒçš„ Supabase URL
- âœ… å®Œå…¨ä¸åŒçš„ API Keys
- âœ… ç¨ç«‹çš„ OAuth è¨­å®š
- âœ… ä¸åŒçš„ Feature Flags

### API ç«¯é»éš”é›¢

**Staging:**
- API: `qerosiozltqrbehctxdn.supabase.co`
- Auth: `qerosiozltqrbehctxdn.supabase.co/auth/v1`
- Storage: `qerosiozltqrbehctxdn.supabase.co/storage/v1`

**Production:**
- API: `ajbusqpjsjcuzzxuueij.supabase.co`
- Auth: `ajbusqpjsjcuzzxuueij.supabase.co/auth/v1`
- Storage: `ajbusqpjsjcuzzxuueij.supabase.co/storage/v1`

---

## ğŸ“ ç’°å¢ƒå°æ‡‰è¡¨

### å®Œæ•´å°æ‡‰é—œä¿‚

| å…ƒç´  | Staging | Production |
|------|---------|-----------|
| **ç›®çš„** | é–‹ç™¼å’Œæ¸¬è©¦ | æ­£å¼ç’°å¢ƒ |
| **Git Branch** | `develop` | `main` |
| **Vercel Project** | To Do Staging | To Do Production |
| **Vercel URL** | to-do-staging.vercel.app | to-do-dev-alan.vercel.app |
| **Supabase Project** | to-do-staging | to-do-production |
| **Supabase ID** | qerosiozlt... | ajbusqpjsj... |
| **Region** | Singapore | Mumbai |
| **APP_ENV** | development | production |
| **Debug Mode** | âœ… Enabled | âŒ Disabled |
| **Analytics** | âŒ Disabled | âœ… Enabled |
| **Auto Deploy** | âœ… On push to develop | âœ… On push to main |

### ç’°å¢ƒè®Šæ•¸å‘½å

| ç”¨é€” | Staging | Production |
|-----|---------|-----------|
| **Supabase URL** | `EXPO_PUBLIC_SUPABASE_URL_DEV` | `EXPO_PUBLIC_SUPABASE_URL` |
| **Supabase Key** | `EXPO_PUBLIC_SUPABASE_ANON_KEY_DEV` | `EXPO_PUBLIC_SUPABASE_ANON_KEY` |
| **Alternative URL** | `EXPO_PUBLIC_SUPABASE_URL_STAGING` | `EXPO_PUBLIC_SUPABASE_URL_PROD` |
| **Alternative Key** | `EXPO_PUBLIC_SUPABASE_ANON_KEY_STAGING` | `EXPO_PUBLIC_SUPABASE_ANON_KEY_PROD` |

---

## ğŸ¯ æœ€ä½³å¯¦è¸

### DO âœ…

1. **é–‹ç™¼æµç¨‹**
   - âœ… åœ¨ Staging ç’°å¢ƒå……åˆ†æ¸¬è©¦
   - âœ… ç¢ºèªæ‰€æœ‰åŠŸèƒ½æ­£å¸¸å¾Œæ‰åˆä½µåˆ° main
   - âœ… ä½¿ç”¨èªç¾©åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼ˆSemantic Versioningï¼‰
   - âœ… å®šæœŸåŒæ­¥ develop å’Œ main åˆ†æ”¯

2. **å®‰å…¨æ€§**
   - âœ… ä¸åœ¨ä»£ç¢¼ä¸­ç¡¬ç·¨ç¢¼ API é‡‘é‘°
   - âœ… ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ç®¡ç†æ•æ„Ÿè³‡è¨Š
   - âœ… å®šæœŸæª¢æŸ¥å’Œè¼ªæ› API é‡‘é‘°
   - âœ… ç‚º Production è¨­å®šæ›´åš´æ ¼çš„ RLS ç­–ç•¥

3. **éƒ¨ç½²**
   - âœ… åˆ©ç”¨ Vercel çš„è‡ªå‹•éƒ¨ç½²
   - âœ… æª¢æŸ¥éƒ¨ç½²æ—¥èªŒç¢ºèªæˆåŠŸ
   - âœ… éƒ¨ç½²å¾Œé€²è¡Œå†’ç…™æ¸¬è©¦
   - âœ… ä¿æŒå›æ»¾èƒ½åŠ›

### DON'T âŒ

1. **é–‹ç™¼æµç¨‹**
   - âŒ ç›´æ¥åœ¨ main åˆ†æ”¯é–‹ç™¼
   - âŒ è·³é Staging æ¸¬è©¦ç›´æ¥éƒ¨ç½²åˆ° Production
   - âŒ å¿˜è¨˜æ›´æ–°ç‰ˆæœ¬è™Ÿ
   - âŒ Commit æœªç¶“æ¸¬è©¦çš„ä»£ç¢¼

2. **å®‰å…¨æ€§**
   - âŒ åœ¨ Production ç’°å¢ƒæ¸¬è©¦
   - âŒ ä½¿ç”¨ Production è³‡æ–™é€²è¡Œé–‹ç™¼
   - âŒ åˆ†äº« API é‡‘é‘°æˆ–ç’°å¢ƒè®Šæ•¸
   - âŒ å°‡ `.env` æ–‡ä»¶æäº¤åˆ° Git

3. **è³‡æ–™ç®¡ç†**
   - âŒ å°‡ Staging è³‡æ–™é·ç§»åˆ° Production
   - âŒ åœ¨ Production æ‰‹å‹•ä¿®æ”¹è³‡æ–™ï¼ˆé™¤éç·Šæ€¥ï¼‰
   - âŒ å¿˜è¨˜å‚™ä»½é‡è¦è³‡æ–™
   - âŒ æ··æ·†å…©å€‹ç’°å¢ƒçš„è³‡æ–™

---

## ğŸ”§ æ•…éšœæ’é™¤

### å•é¡Œ 1: ç’°å¢ƒé€£æ¥éŒ¯èª¤

**ç—‡ç‹€:** æ‡‰ç”¨é€£æ¥åˆ°éŒ¯èª¤çš„ Supabase å°ˆæ¡ˆ

**æª¢æŸ¥æ­¥é©Ÿ:**
```bash
# 1. ç¢ºèªç•¶å‰ç’°å¢ƒ
console.log('Environment:', process.env.EXPO_PUBLIC_APP_ENV);
console.log('Supabase URL:', process.env.EXPO_PUBLIC_SUPABASE_URL);

# 2. æª¢æŸ¥ç’°å¢ƒè®Šæ•¸è¨­å®š
# Vercel: Settings â†’ Environment Variables
# æœ¬åœ°: æª¢æŸ¥ .env.local æ–‡ä»¶

# 3. é‡æ–°éƒ¨ç½²æˆ–é‡å•Ÿæœ¬åœ°æœå‹™
npm start --clear  # æœ¬åœ°
# æˆ–åœ¨ Vercel Dashboard æ‰‹å‹• Redeploy
```

### å•é¡Œ 2: OAuth é‡å®šå‘å¤±æ•—

**æª¢æŸ¥æ¸…å–®:**
- [ ] Google Cloud Console Redirect URI è¨­å®šæ­£ç¢º
- [ ] Supabase Site URL è¨­å®šæ­£ç¢º
- [ ] Vercel åŸŸåèˆ‡è¨­å®šçš„ Redirect URI ä¸€è‡´
- [ ] ç’°å¢ƒè®Šæ•¸ä¸­çš„ Supabase URL æ­£ç¢º

### å•é¡Œ 3: è³‡æ–™ä¸åŒæ­¥

**åŸå› :** å…©å€‹ç’°å¢ƒä½¿ç”¨ä¸åŒçš„è³‡æ–™åº«

**è§£æ±ºæ–¹æ³•:**
- Staging å’Œ Production è³‡æ–™**æ‡‰è©²**ä¿æŒéš”é›¢
- å¦‚éœ€åŒæ­¥çµæ§‹ï¼Œä½¿ç”¨ Migration æª”æ¡ˆ
- ä¸è¦æ‰‹å‹•è¤‡è£½è³‡æ–™

---

## ğŸ“š ç›¸é—œæ–‡æª”

### æ ¸å¿ƒæ–‡æª”
- [ENVIRONMENT_VARIABLES.md](./ENVIRONMENT_VARIABLES.md) - ç’°å¢ƒè®Šæ•¸è©³ç´°é…ç½®
- [SUPABASE_ENVIRONMENTS.md](./SUPABASE_ENVIRONMENTS.md) - Supabase ç’°å¢ƒè¨­å®š
- [VERCEL_DEPLOYMENT.md](./VERCEL_DEPLOYMENT.md) - Vercel éƒ¨ç½²æŒ‡å—

### è¨­å®šæŒ‡å—
- [ENV_SETUP_INSTRUCTIONS.md](./ENV_SETUP_INSTRUCTIONS.md) - ç’°å¢ƒè¨­å®šå¿«é€ŸæŒ‡å—
- [GOOGLE_OAUTH_SETUP.md](./GOOGLE_OAUTH_SETUP.md) - Google OAuth è¨­å®š
- [SUPABASE_SETUP.md](./SUPABASE_SETUP.md) - Supabase åˆå§‹è¨­å®š

### é–‹ç™¼è¦ç¯„
- [README.md](./README.md) - å°ˆæ¡ˆç¸½è¦½
- å°ˆæ¡ˆé–‹ç™¼è¦å‰‡ï¼ˆåœ¨ Cursor Rules ä¸­ï¼‰

---

## ğŸ“ å­¸ç¿’è³‡æº

### Supabase
- [Supabase Docs](https://supabase.com/docs)
- [Supabase CLI](https://supabase.com/docs/guides/cli)
- [Row Level Security](https://supabase.com/docs/guides/auth/row-level-security)

### Vercel
- [Vercel Docs](https://vercel.com/docs)
- [Environment Variables](https://vercel.com/docs/environment-variables)
- [Git Integration](https://vercel.com/docs/git)

### React Native / Expo
- [Expo Docs](https://docs.expo.dev/)
- [React Native Docs](https://reactnative.dev/docs)

---

## ğŸ“ æ”¯æ´

é‡åˆ°å•é¡Œï¼ŸæŸ¥çœ‹ä»¥ä¸‹è³‡æºï¼š

1. **æª¢æŸ¥æ–‡æª”:** ç›¸é—œé…ç½®æ–‡æª”ä¸­çš„æ•…éšœæ’é™¤ç« ç¯€
2. **æª¢æŸ¥æ—¥èªŒ:** Vercel Deployment Logsã€Supabase Logs
3. **ç’°å¢ƒé©—è­‰:** ç¢ºèªç’°å¢ƒè®Šæ•¸å’Œé…ç½®æ­£ç¢º
4. **æ¸¬è©¦æµç¨‹:** åœ¨ Staging ç’°å¢ƒé‡ç¾å•é¡Œ

---

**æœ€å¾Œæ›´æ–°:** 2025-10-26  
**æ¶æ§‹ç‰ˆæœ¬:** 2.0 (é›™ç’°å¢ƒæ¶æ§‹)  
**ç¶­è­·è€…:** Too-Doo-List Team

