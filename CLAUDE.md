# Too-Doo-List é–‹ç™¼è¦ç¯„

é€™æ˜¯ **Too-Doo-List** å°ˆæ¡ˆçš„é–‹ç™¼æŒ‡å¼•ï¼Œé©ç”¨æ–¼ React Native (Expo) + iOS Widget (Swift) æŠ€è¡“æ£§ã€‚

## æŠ€è¡“æ£§èˆ‡æ¶æ§‹

- **å‰ç«¯æ¡†æ¶**: React Native 0.81.5 + Expo SDK 54
- **iOS Native**: Swift (Widget Extension)
- **å¾Œç«¯**: Supabase (Auth + Database)
- **ç‹€æ…‹ç®¡ç†**: React Hooks + Context API
- **è³‡æ–™æŒä¹…åŒ–**: AsyncStorage (æœ¬åœ°) + Shared Group Preferences (Widget)
- **åˆ†æ**: Mixpanel (App) + Google Analytics 4 (Web)
- **å»£å‘Š**: Google AdMob

## å®Œæˆå®šç¾© (Definition of Done)

æ¯å€‹åŠŸèƒ½æˆ–ä¿®æ”¹å®Œæˆæ™‚å¿…é ˆç¬¦åˆï¼š

1. **å¯é‹è¡Œ**:
   - React Native: `npm start` ä¸å ±éŒ¯
   - iOS Widget: Xcode build æˆåŠŸ
2. **æª”æ¡ˆç¯„åœ**: åªä¿®æ”¹å¿…è¦æª”æ¡ˆï¼Œä¸åšã€Œé †æ‰‹é‡æ§‹ã€
3. **éŒ¯èª¤è™•ç†**: æ‰€æœ‰ API å‘¼å«ã€è³‡æ–™å­˜å–éƒ½æœ‰éŒ¯èª¤è™•ç†
4. **Widget åŒæ­¥**: å¦‚æœæ¶‰åŠ Widget è³‡æ–™ï¼Œå¿…é ˆæ›´æ–° `widgetService.js`
5. **åœ¨æ”¹å®Œæª”æ¡ˆå¾Œç¢ºèªèƒ½ç·¨è­¯/é‹è¡Œå†æ¨™è¨˜å®Œæˆ**

## é–‹ç™¼ç­–ç•¥

### ä¸€æ¬¡åªåšä¸€ä»¶äº‹
- æ¯å€‹ä»»å‹™çµæŸå¾Œ `git commit`
- commit å¾Œç«‹åˆ» `/clear` æ¸…é™¤ context
- å¡ä½æ™‚ç”¨ `/compact` æŒ‡å®šç„¦é»

### æª”æ¡ˆä¿®æ”¹åŸå‰‡
- **ç¦æ­¢**ï¼šç„¡é—œçš„æ ¼å¼åŒ–ã€è¨»è§£ã€é‡æ§‹
- **ç¦æ­¢**ï¼šæ–°å¢æœªè¢«è¦æ±‚çš„åŠŸèƒ½
- **ç¦æ­¢**ï¼šä¿®æ”¹æœªæ¶‰åŠçš„æ¨¡çµ„
- **åªæ”¹**: ä»»å‹™ç›´æ¥ç›¸é—œçš„é‚è¼¯

### æ–°åŠŸèƒ½é–‹ç™¼æµç¨‹
1. å…ˆç”¨ Glob/Grep æ‰¾å‡ºç›¸é—œç¾æœ‰ç¨‹å¼ç¢¼
2. ç¢ºèªç¾æœ‰æ¨¡å¼ï¼ˆå‘½åã€çµæ§‹ã€éŒ¯èª¤è™•ç†ï¼‰
3. æ²¿ç”¨ç¾æœ‰æ¨¡å¼å¯¦ä½œæ–°åŠŸèƒ½
4. æ›´æ–° Widget è³‡æ–™ï¼ˆå¦‚éœ€è¦ï¼‰
5. æœ¬åœ°æ¸¬è©¦å¯é‹è¡Œ

## å¸¸è¦‹æ¨¡çµ„èˆ‡è·è²¬

| æ¨¡çµ„ | è·è²¬ | ä¿®æ”¹æ™‚æ©Ÿ |
|------|------|----------|
| `src/services/` | æ¥­å‹™é‚è¼¯ã€APIã€è³‡æ–™å­˜å– | æ–°å¢åŠŸèƒ½ã€æ”¹è³‡æ–™æµ |
| `src/components/` | UI å…ƒä»¶ | æ–°å¢ç•«é¢ã€æ”¹æ¨£å¼ |
| `src/locales/` | å¤šèªç³»æ–‡å­— | æ–°å¢ UI æ–‡å­— |
| `ios/TaskCalWidget/` | iOS Widget (Swift) | Widget é¡¯ç¤ºé‚è¼¯ |
| `src/services/widgetService.js` | Widget è³‡æ–™åŒæ­¥ | Widget è³‡æ–™è®Šæ›´ |

## Widget é–‹ç™¼æ³¨æ„äº‹é …

ç•¶ä¿®æ”¹æ¶‰åŠ **iOS Widget** æ™‚ï¼š

1. **è³‡æ–™åŒæ­¥è·¯å¾‘**:
   - React Native â†’ `widgetService.js` â†’ Shared Group Preferences â†’ Widget
2. **è§¸ç™¼æ™‚æ©Ÿ**: ä»»å‹™æ–°å¢/åˆªé™¤/å®Œæˆæ™‚å‘¼å« `updateWidget()`
3. **Swift æª”æ¡ˆ**: `ios/TaskCalWidget/TaskCalWidget.swift`
4. **æ¸¬è©¦æ–¹å¼**:
   - Xcode build Widget target
   - æ‰‹æ©Ÿ/æ¨¡æ“¬å™¨ä¸Šé•·æŒ‰ä¸»ç•«é¢æ¸¬è©¦

## å¸¸è¦‹é™·é˜±

- **ä¸è¦** ç›´æ¥ä¿®æ”¹ `ios/Pods/` (é€™æ˜¯ä¾è³´æª”æ¡ˆ)
- **ä¸è¦** åœ¨ React Native æ”¹å®Œå¾Œå¿˜è¨˜åŒæ­¥ Widget
- **ä¸è¦** ä½¿ç”¨ `expo start` å¾Œå¿˜è¨˜é‡æ–° build Widget
- **ä¸è¦** åœ¨ `/clear` å‰å°±é–‹å§‹ä¸‹ä¸€å€‹ä»»å‹™

## ç‰ˆæœ¬ç™¼å¸ƒå‰æª¢æŸ¥

- [ ] `npm start` æ­£å¸¸å•Ÿå‹•
- [ ] iOS Widget build æˆåŠŸ
- [ ] ç‰ˆæœ¬è™Ÿå·²æ›´æ–° (package.json + app.config.js + iOS Info.plist)
- [ ] æ–°åŠŸèƒ½å·²æ¸¬è©¦ï¼ˆè‡³å°‘æ‰‹å‹• smoke testï¼‰
- [ ] RELEASE_NOTES.md å·²æ›´æ–°

---

ğŸ’¡ **é…åˆä½¿ç”¨**:
- `/rn-ios-feature` - æ–°åŠŸèƒ½é–‹ç™¼
- `/ios-widget-debug` - Widget é™¤éŒ¯
- `/pr-check` - æäº¤å‰æª¢æŸ¥
